#!/usr/bin/env bash

# AWS S3 Ls Prefixes command
# ==========================
# Tim Friske <me@tifr.de>
#
# Prints paths of AWS S3 prefixes in bucket below prefix.
#
# Deps:: aws, bash, env, sed

# Ensure fail-fast script execution.
shopt -os nounset pipefail errexit errtrace

# Input parameters and validation:
AWS_S3_URI="${1:-${AWS_S3_URI:?required}}"

aws s3 ls -- "${AWS_S3_URI}" | sed --regexp-extended --expression='s:^\s+PRE\s::'
