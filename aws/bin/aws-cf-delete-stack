#!/usr/bin/env bash

# AWS CloudFormation Delete Stack command
# =======================================
# Tim Friske <me@tifr.de>
#
# Deletes the given AWS CloudFormation stack and waits until it is deleted.
#
# Deps:: aws, bash, env

# Ensure fail-fast script execution.
shopt -os nounset pipefail errexit errtrace

# Input parameters and validation:
STACK_NAME="${1:-${STACK_NAME:?required}}"

aws cloudformation delete-stack --stack-name "${STACK_NAME}"
aws cloudformation wait stack-delete-complete --stack-name "${STACK_NAME}"
